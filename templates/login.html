{% extends 'layout.html' %}

{% block content %}
<div class="background-container">
    <div class="light-background"></div>
    <div class="dark-background"></div>
    <div class="aurora-container"><div class="aurora"></div></div>
    <div class="blob-container"></div>
    <div class="grid-pattern"></div>
</div>

<div class="flex items-center justify-center min-h-screen relative z-10">
  <div class="glass-card text-dark-800 dark:text-white p-8 rounded-2xl shadow-lg w-full max-w-md border border-white/20">
    <h2 class="text-2xl font-bold mb-6 font-display text-gradient text-center">Login to Your Account</h2>

    {% if messages %}
      <div class="mb-6">
        {% for message in messages %}
          <div class="px-4 py-3 rounded-lg mb-2 font-medium
                      {% if message.tags == 'error' %}
                        bg-red-100 text-red-700 border border-red-300
                      {% elif message.tags == 'success' %}
                        bg-green-100 text-green-700 border border-green-300
                      {% else %}
                        bg-blue-100 text-blue-700 border border-blue-300
                      {% endif %}">
            {{ message }}
          </div>
        {% endfor %}
      </div>
    {% endif %}

    <form action="{% url 'login' %}" method="POST" class="space-y-4">
      {% csrf_token %}
      <div>
        <label for="username" class="block mb-1 font-medium">Username</label>
        <input type="text" id="username" name="username" required
               class="w-full px-4 py-2 rounded-lg bg-white/80 dark:bg-dark-800 border border-gray-300 dark:border-dark-600 focus:outline-none focus:ring-2 focus:ring-primary-500 text-dark-800 dark:text-white" />
      </div>
      <div>
        <label for="password" class="block mb-1 font-medium">Password</label>
        <input type="password" id="password" name="password" required
               class="w-full px-4 py-2 rounded-lg bg-white/80 dark:bg-dark-800 border border-gray-300 dark:border-dark-600 focus:outline-none focus:ring-2 focus:ring-primary-500 text-dark-800 dark:text-white" />
      </div>
      <button type="submit"
              class="w-full py-2 mt-4 bg-gradient-to-r from-primary-500 to-secondary-500 hover:from-primary-600 hover:to-secondary-600 text-white font-semibold rounded-full shadow transition-all duration-200">
        Login
      </button>
    </form>

    <p class="text-center text-sm mt-6 text-dark-600 dark:text-dark-300">Don't have an account?
      <a href="{% url 'register' %}" class="text-primary-500 hover:underline">Sign Up</a>
    </p>
  </div>
</div>
<button id="theme-toggle"
    class="fixed bottom-8 right-8 z-50 p-3 rounded-full border border-primary-100 bg-white/80 dark:bg-white/10 hover:bg-primary-100/60 dark:hover:bg-white/20 transition-all duration-300 hover:rotate-12 shadow text-primary-700 dark:text-white">
    <!-- Sun icon -->
    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 dark:hidden" viewBox="0 0 24 24" fill="none"
        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <circle cx="12" cy="12" r="5"></circle>
        <line x1="12" y1="1" x2="12" y2="3"></line>
        <line x1="12" y1="21" x2="12" y2="23"></line>
        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
        <line x1="1" y1="12" x2="3" y2="12"></line>
        <line x1="21" y1="12" x2="23" y2="12"></line>
        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
    <!-- Moon icon -->
    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 hidden dark:block" viewBox="0 0 24 24"
        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
        stroke-linejoin="round">
        <path d="M21 12.79A9 9 0 1 1 11.21 3 A7 7 0 0 0 21 12.79z"></path>
    </svg>
</button>

<script>
    // Set theme on page load
    if (localStorage.getItem('color-theme') === 'dark' ||
        (!('color-theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
        document.documentElement.classList.add('dark');
    } else {
        document.documentElement.classList.remove('dark');
    }
    // Toggle theme on button click
    document.getElementById('theme-toggle').addEventListener('click', function () {
        if (document.documentElement.classList.contains('dark')) {
            document.documentElement.classList.remove('dark');
            localStorage.setItem('color-theme', 'light');
        } else {
            document.documentElement.classList.add('dark');
            localStorage.setItem('color-theme', 'dark');
        }
    });
</script>
{% endblock content %}